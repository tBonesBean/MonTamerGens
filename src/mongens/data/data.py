from typing import Dict
from pathlib import Path
import yaml


# -- Baseline stats (can override per species later, after mutagens do # there thing and populate stat boxes)
BASE_STATS: Dict[str, int] = {
    "HP": 100,
    "ATK": 50,
    "DEF": 50,
    "SPATK": 50,
    "SPDEF": 50,
    "SPD": 50,
    "ACC": 95,
    "EVA": 5,
    "LUCK": 10,
}

SEED_TYPES = [
    "Mineral",
    "Beast",
    "Aquatic",
    "Frost",
    "Brawler",
    "Insect",
    "Mythic",
    "Electric",
    "Sylvan",
    "Aerial",
    "Dread",
    "Inferno",
    "Toxic",
    "Ancient",
    "Astral",
    "Anomalous",
]
# Base rarity weights for each type. Higher is more common.
SEED_TYPES_WEIGHTED = {
    "Mineral": 1.0,
    "Beast": 1.0,
    "Aquatic": 1.0,
    "Frost": 0.8,
    "Brawler": 0.8,
    "Insect": 1.0,
    "Mythic": 0.7,
    "Electric": 0.9,
    "Sylvan": 1.0,
    "Aerial": 0.8,
    "Dread": 0.7,
    "Inferno": 0.9,
    "Toxic": 0.9,
    "Ancient": 0.7,
    "Astral": 0.7,
    "Anomalous": 0.3,
}

SEED_TYPES = sorted(list(SEED_TYPES_WEIGHTED.keys()))

FORMS_BY_TYPE = {
    "Mineral": {
        "Gorgonopsid": 0.5,
        "Stone Golem": 0.5,
        "Earth Elemental": 0.5,
        "Rock Hyrax": 0.5,
        "Basilisk Lizard": 0.5,
        "Gargoyle": 0.5,
        "Moai Colossus": 0.5,
        "Giant Anteater": 0.5,
        "Trilobite": 0.5,
        "Komodo Dragon": 0.5,
        "Khalkotauroi": 0.5,
        "Stoneback Tortoise Beast": 0.5,
        "Obsidian Sandwyrm": 0.5,
        "Basalt CragWalker": 0.5,
        "Sandstone Sphinx": 0.5,
        "Geode Armadillo": 0.5,
        "Avalanche King": 0.5,
        "Shale Wyrm": 0.5,
        "Marble Titan": 0.5,
        "GravelHide Rhino": 0.5,
        "Petrified Wood Ent": 0.5,
        "Cavernous Maw": 0.5,
        "Crystal Basilisk": 0.5,
    },
    "Beast": {
        "Smilodon": 0.5,
        "Minotaur": 0.5,
        "Wolverine": 0.5,
        "Wild Boar": 0.5,
        "Dire Hound": 0.5,
        "Pangolin": 0.5,
        "Tasmanian Tiger": 0.5,
        "Tasmanian Devil": 0.5,
        "Hellhound": 0.5,
        "Baboon": 0.5,
        "Barong": 0.5,
        "Nandi Bear": 0.5,
        "Calydonian Boar": 0.5,
        "Dire Wolf Alpha": 0.5,
        "Grizzly King": 0.5,
        "Shadowpelt Panther": 0.5,
        "Charging Auroch": 0.5,
        "Razor Felldrake": 0.5,
        "Alpha Chimera": 0.5,
        "Savage Manticore": 0.5,
        "Horn-Crested Grazer": 0.5,
        "Owlbear": 0.5,
        "Canyon Howler": 0.5,
    },
    "Aquatic": {
        "Dugong": 0.5,
        "Giant Oarfish": 0.5,
        "Dunkleosteus": 0.5,
        "Kraken": 0.5,
        "Axolotl": 0.5,
        "BlueDragon Sea Slug": 0.5,
        "Mosasaur": 0.5,
        "Naiad": 0.5,
        "Sailfish": 0.5,
        "Coelacanth": 0.5,
        "Kelpie": 0.5,
        "Adaro": 0.5,
        "Cetus": 0.5,
        "Abyssal Angler": 0.5,
        "Tidal Leviathan": 0.5,
        "Reef Hydra": 0.5,
        "Swamp Boa": 0.5,
        "Bioluminescent Jellyfish": 0.5,
        "DeepSea Viper": 0.5,
        "Armored Nautiloid": 0.5,
        "Crocodylian": 0.5,
        "PearlShell Turtle": 0.5,
        "Vortex Eel": 0.5,
    },
    "Frost": {
        "Polar Bear": 0.5,
        "Woolly Rhinoceros": 0.5,
        "Wendigo": 0.5,
        "Snowy Owl": 0.5,
        "Frost Elemental": 0.5,
        "Caribou": 0.5,
        "Yeti": 0.5,
        "Sabertooth": 0.5,
        "Megaloceros": 0.5,
        "Narwhal": 0.5,
        "Jotunn": 0.5,
        "Snow Kirin": 0.5,
        "Frost Wyrmling Drake": 0.5,
        "Glacial Behemoth": 0.5,
        "Frost Wyvern": 0.5,
        "Mammoth": 0.5,
        "Snow Lynx": 0.5,
        "Avalanche Spirit": 0.5,
        "Hoarfrost Gryphon": 0.5,
        "Tundra Stalker": 0.5,
        "Regal Caribou": 0.5,
        "Frozen SoulEater": 0.5,
    },
    "Brawler": {
        "Kangaroo": 0.5,
        "Mantis Shrimp": 0.5,
        "Gorilla": 0.5,
        "Boxing Beetle": 0.5,
        "Red Kangaroo Rat": 0.5,
        "Secretary Bird": 0.5,
        "Harpy": 0.5,
        "Cassowary": 0.5,
        "Thylacoleo": 0.5,
        "Chimpanzee": 0.5,
        "Quartz Gargant": 0.5,
        "Pummeler Homunculus": 0.5,
        "Oni Boxer": 0.5,
        "Asura": 0.5,
        "Ogre": 0.5,
        "Brawling Centaur": 0.5,
        "Capoeira-Dancer Sprite": 0.5,
        "PressurePoint Monk": 0.5,
        "Fist Golem": 0.5,
        "Cyclops": 0.5,
        "Satyr": 0.5,
        "Bladed-Tonfa Mantis": 0.5,
        "Wrecking-Ball Ape": 0.5,
    },
    "Insect": {
        "Tarantula Hawk": 0.5,
        "Titan Beetle": 0.5,
        "Meganeura": 0.5,
        "Antlion": 0.5,
        "Mothman": 0.5,
        "Horseshoe Crab": 0.5,
        "Coconut Crab": 0.5,
        "Grylloblattid": 0.5,
        "Giant Isopod": 0.5,
        "Praying Mantis": 0.5,
        "Scarab Guardian": 0.5,
        "Unkcela": 0.5,
        "Trilobite Colossus": 0.5,
        "Hive Tyrant": 0.5,
        "Acid Bombardier": 0.5,
        "Glass Wasp": 0.5,
        "Phased Spider": 0.5,
        "Mycelial Centipede": 0.5,
        "Obsidian Scorpion": 0.5,
        "Resin Weaver": 0.5,
        "Seeker Hornet": 0.5,
        "Swarm Lord": 0.5,
        "Quicksand Scarab": 0.5,
    },
    "Mythic": {
        "Griffin": 0.5,
        "Kitsune": 0.5,
        "Banshee": 0.5,
        "Thunderbird": 0.5,
        "Nemean Lion": 0.5,
        "Leviathan": 0.5,
        "Qilin": 0.5,
        "Selkie": 0.5,
        "Jorōgumo": 0.5,
        "Phoenix": 0.5,
        "Mapinguari": 0.5,
        "Hippogriff": 0.5,
        "Tikbalang": 0.5,
        "Celestial Dragon": 0.5,
        "Terra Tortoise": 0.5,
        "Norn": 0.5,
        "Dreameater Baku": 0.5,
        "Storm Roc": 0.5,
        "SunEating Fenrir": 0.5,
        "Unpredictable Djinn": 0.5,
        "Sphinx": 0.5,
        "Unicorn": 0.5,
        "Hephaestus": 0.5,
    },
    "Electric": {
        "Electric Eel": 0.5,
        "Storm Elemental": 0.5,
        "Thundering Roc": 0.5,
        "Platypus": 0.5,
        "Torpedo Ray": 0.5,
        "Ball Lightning Sprite": 0.5,
        "Electric Catfish": 0.5,
        "Scintillating Serpent": 0.5,
        "Thunderbird Whelp": 0.5,
        "Raiju": 0.5,
        "Volt Seraph": 0.5,
        "Living Tesla Coil": 0.5,
        "Field Distorter": 0.5,
        "Ionized Drake": 0.5,
        "Ancestor Jellyfish": 0.5,
        "Arc Spider": 0.5,
        "Lightning Hound": 0.5,
        "Electrified Lynx": 0.5,
        "Zap Condor": 0.5,
        "Ball-Lightning Elemental": 0.5,
        "Railgun Beetle": 0.5,
    },
    "Sylvan": {
        "Dryad": 0.5,
        "Nepenthes Pitcher Beast": 0.5,
        "Ent": 0.5,
        "Yew Tree Spirit": 0.5,
        "Mandrake": 0.5,
        "Venus Flytrap": 0.5,
        "Wollemi Pine Dryosaur": 0.5,
        "Bramble Golem": 0.5,
        "Baobab Tortoise": 0.5,
        "Moss Sprite": 0.5,
        "Kodama": 0.5,
        "Thorn Hydra": 0.5,
        "Spriggan": 0.5,
        "Canopy Arborcat": 0.5,
        "Fungal-Hulk": 0.5,
        "Floral Behemoth": 0.5,
        "Amber Treant": 0.5,
        "Photosynthetic Drake": 0.5,
        "Bee-Lord": 0.5,
        "Deep Earth-Shaker": 0.5,
        "Razor-Leaf Tiger": 0.5,
        "Mycelial Plant": 0.5,
        "Willow-Wisp Matron": 0.5,
    },
    "Aerial": {
        "Shoebill": 0.5,
        "Archaeopteryx": 0.5,
        "Roc": 0.5,
        "Harpy Eagle": 0.5,
        "Kiwi": 0.5,
        "Hoatzin": 0.5,
        "Takahē": 0.5,
        "Terror Bird": 0.5,
        "Lyrebird": 0.5,
        "Redcrowned Crane": 0.5,
        "Firefoot Heron": 0.5,
        "Bennu": 0.5,
        "Storm Petrel Titan": 0.5,
        "GaleForce Falcon": 0.5,
        "SunCrested Eagle": 0.5,
        "MirageWing Hummingbird": 0.5,
        "Obsidian Owl": 0.5,
        "Sonic Screecher": 0.5,
        "Kingfisher": 0.5,
        "Apex Condor": 0.5,
        "Albatross": 0.5,
        "Parrot": 0.5,
        "Plagued Vulture": 0.5,
    },
    "Dread": {
        "Wraith": 0.5,
        "Shadow Hound": 0.5,
        "Nightgaunt": 0.5,
        "Chupacabra": 0.5,
        "Ghoul": 0.5,
        "Barghest": 0.5,
        "Lurking Mirefiend": 0.5,
        "Blemmyes": 0.5,
        "Mare": 0.5,
        "Dullahan": 0.5,
        "Draugr": 0.5,
        "Nachtkrapp": 0.5,
        "Shadow Lamia": 0.5,
        "Grave-Robber Lich": 0.5,
        "Fear-Monger": 0.5,
        "Soul-Cage Phantom": 0.5,
        "Weeping-Angel Statue": 0.5,
        "Chain-Rattling Specter": 0.5,
        "Mind-Devouring Horror": 0.5,
        "Flesh-Stitched Abomination": 0.5,
        "Whispering Shadow": 0.5,
        "Corpse-Candle Wisp": 0.5,
        "Hungering Void": 0.5,
    },
    "Inferno": {
        "Salamander": 0.5,
        "Fire Jinn": 0.5,
        "Ifrit": 0.5,
        "Ash Drake": 0.5,
        "Volcanic Worm": 0.5,
        "Fire Beetle": 0.5,
        "Ember Lion": 0.5,
        "Solifuge": 0.5,
        "Pyrosaurus": 0.5,
        "Firebird": 0.5,
        "Magma Salamander": 0.5,
        "Zhurong Beast": 0.5,
        "Fire Jotunn": 0.5,
        "Obsidian-Glass Elemental": 0.5,
        "Blue-Flame Spirit": 0.5,
        "Coal-Hearted Golem": 0.5,
        "Wildfire-Horse": 0.5,
        "Ash-Cloud Djinn": 0.5,
        "Solar-Flare Phoenix": 0.5,
        "Geyser-Burst Tortoise": 0.5,
        "Scorched-Earth Wyrm": 0.5,
        "Forge-Fire Cyclops": 0.5,
        "Living Conflagration": 0.5,
    },
    "Toxic": {
        "Blue-ringed Octopus": 0.5,
        "Stonefish": 0.5,
        "Inland Taipan": 0.5,
        "Poison Dart Frog": 0.5,
        "Gila Monster": 0.5,
        "Boomslang": 0.5,
        "Box Jellyfish": 0.5,
        "Deathstalker Scorpion": 0.5,
        "Portuguese Man o’ War": 0.5,
        "Hooded Pitohui": 0.5,
        "Wyvern Basilisk": 0.5,
        "Tatzelwurm": 0.5,
        "Nagual Serpent Shade": 0.5,
        "Acid-Blood Drake": 0.5,
        "Neurotoxin-Gland Jelly": 0.5,
        "Corrosive-Slime Elemental": 0.5,
        "Plague-Bearing Rat-King": 0.5,
        "Venom-Fanged Spider": 0.5,
        "Polluted-Water Naiad": 0.5,
        "Blight-Spreader Fungus": 0.5,
        "Paralytic-Sting Wasp": 0.5,
        "Miasma-Cloud": 0.5,
        "Black-Mold Horror": 0.5,
    },
    "Ancient": {
        "Anomalocaris": 0.5,
        "Titanoboa": 0.5,
        "Andrewsarchus": 0.5,
        "Plesiosaur": 0.5,
        "Ammonite": 0.5,
        "Saurosuchus": 0.5,
        "Hallucigenia": 0.5,
        "Protostega": 0.5,
        "Giant Ground Sloth": 0.5,
        "Quetzalcoatl": 0.5,
        "Diprotodon": 0.5,
        "Dunkleoceratid": 0.5,
        "Uintatherium": 0.5,
        "Primordial Ooze": 0.5,
        "AmberEncased Insect": 0.5,
        "Living Fossil Coelacanth": 0.5,
        "Tar-Pit Sloth": 0.5,
        "First-Forest Treant": 0.5,
        "Unchanged-Gator": 0.5,
        "Pre-Vertebrate Worm": 0.5,
        "Megafauna Mammoth": 0.5,
        "Sabertooth": 0.5,
        "Progenitor Cell": 0.5,
    },
    "Astral": {
        "Cerebellid Wisp": 0.5,
        "Astral Jelly": 0.5,
        "Homunculus": 0.5,
        "Tarsier": 0.5,
        "Mind Flayer": 0.5,
        "Dream-Eater Tapir Spirit": 0.5,
        "Spectral Owl": 0.5,
        "Neurophage Shade": 0.5,
        "Deep-Thought Squid": 0.5,
        "Oracle Serpent": 0.5,
        "Alkonost": 0.5,
        "Astral Lynx": 0.5,
        "Baku": 0.5,
        "Thought-Form Golem": 0.5,
        "Collective-Unconscious Entity": 0.5,
        "Ego-Death Spirit": 0.5,
        "Id-Monster": 0.5,
        "Memory-Thief": 0.5,
        "Telekinetic-Blade Dancer": 0.5,
        "Precognitive Seer": 0.5,
        "Emotion-Leech": 0.5,
        "Astral-Projecting Monk": 0.5,
        "Sentient-Idea": 0.5,
    },
    "Anomalous": {
        "Sphinx": 0.5,
        "Doppelganger": 0.5,
        "Mimic": 0.5,
        "Amorphous Blob": 0.5,
        "Featureless Mannequin": 0.5,
        "Echoing Shade": 0.5,
        "Glitching Anomaly": 0.5,
        "Null-Being": 0.5,
        "Conceptual Entity": 0.5,
        "Tesseract-Beast": 0.5,
        "Forgotten God": 0.5,
    },
}

SEEDTYPE_ATTR = {
    "Mineral": {
        "mul": {"DEF": 1.40, "SPDEF": 1.30, "ATK": 1.10, "SPD": 0.80},
        "add": {"DEF": 10},
        "tags": ["Grounded", "Resist:Electric", "Weak:Brawler", "Weak:Aquatic"],
    },
    "Beast": {
        "mul": {"ATK": 1.20, "SPD": 1.10, "HP": 1.20, "DEF": 1.10},
        "add": {},
        "tags": ["Feral", "Intimidate", "Weak:Toxic"],
    },
    "Aquatic": {
        "mul": {"SPDEF": 1.35, "SPD": 1.15, "HP": 1.15, "ATK": 1.15},
        "add": {},
        "tags": ["Amphibious", "Resist:Inferno", "Weak:Electric"],
    },
    "Frost": {
        "mul": {"SPDEF": 1.40, "HP": 1.15, "SPATK": 1.15, "SPD": 0.85},
        "add": {"SPDEF": 5},
        "tags": ["FrostAura", "Resist:Aquatic", "Weak:Inferno"],
    },
    "Brawler": {
        "mul": {"ATK": 1.45, "SPD": 1.35, "SPATK": 0.80},
        "add": {"ATK": 10},
        "tags": ["Combo", "Resist:Dread", "Weak:Astral"],
    },
    "Insect": {
        "mul": {"SPD": 1.25, "ATK": 1.20, "DEF": 1.20, "HP": 0.90},
        "add": {"EVA": 5},
        "tags": ["Swarm", "Exoskeleton", "Weak:Aerial", "Weak:Inferno"],
    },
    "Mythic": {
        "mul": {"SPATK": 1.25, "SPDEF": 1.25, "HP": 1.20},
        "add": {"LUCK": 10},
        "tags": ["Fated", "CannotBeCursed", "Weak:Ancient"],
    },
    "Electric": {
        "mul": {"SPD": 1.40, "SPATK": 1.35, "ATK": 1.10},
        "add": {},
        "tags": ["HighVoltage", "Resist:Aerial", "Weak:Mineral"],
    },
    "Sylvan": {
        "mul": {"HP": 1.40, "SPDEF": 1.2, "SPATK": 1.15, "SPD": 0.80},
        "add": {},
        "tags": ["Regrowth", "Weak:Toxic", "Resist:Aquatic", "Weak:Inferno"],
    },
    "Aerial": {
        "mul": {"SPD": 1.40, "ATK": 1.30, "SPDEF": 1.15},
        "add": {"EVA": 10},
        "tags": ["Flying", "Acrobatic", "Weak:Electric"],
    },
    "Dread": {
        "mul": {"ATK": 1.15, "SPDEF": 1.20, "DEF": 1.20},
        "add": {},
        "tags": ["Fear", "LifeSteal", "Weak:Mythic", "Weak:Radiant"],
    },
    "Inferno": {
        "mul": {"SPATK": 1.25, "ATK": 1.20, "SPDEF": 0.90},
        "add": {"SPATK": 10},
        "tags": ["Ignite", "Resist:Frost", "Weak:Aquatic"],
    },
    "Toxic": {
        "mul": {"SPATK": 1.35, "DEF": 1.25, "HP": 1.15, "SPD": 0.95},
        "add": {},
        "tags": ["Poisonous", "Corrosive", "Weak:Mineral", "Weak:Sylvan"],
    },
    "Ancient": {
        "mul": {"HP": 1.30, "DEF": 1.25, "ATK": 1.25, "SPD": 0.80},
        "add": {"HP": 25, "DEF": 5},
        "tags": ["Primordial", "Resist:Mythic", "Weak:Chaos"],
    },
    "Astral": {
        "mul": {"SPATK": 1.40, "SPD": 1.30, "SPDEF": 1.10, "HP": 0.90},
        "add": {"SPATK": 5},
        "tags": ["Telekinesis", "Clairvoyant", "Weak:Dread"],
    },
    "Anomalous": {
        "mul": {
            "HP": 1.15,
            "DEF": 1.15,
            "ATK": 1.15,
            "SPDEF": 1.15,
            "SPATK": 1.15,
            "SPD": 1.15,
        },
        "add": {"ACC": 5, "EVA": 5, "LUCK": 10},
        "tags": [],
    },
}

# TYPE_SYNERGY_BOOSTS
# Maps frozenset({primary, secondary}) -> multiplicative boost to apply
# when that pair is being considered. Values >1.0 = positive synergy,
# values <1.0 = penalty (but use INCOMPATIBLE_TYPE_PAIRS for hard forbids).
TYPE_SYNERGY_BOOSTS = {
    frozenset(["Insect", "Toxic"]): 1.15,
    frozenset(["Mineral", "Ancient"]): 0.90,
    frozenset(["Sylvan", "Aquatic"]): 0.80,
    frozenset(["Frost", "Ancient"]): 1.00,
    frozenset(["Inferno", "Mineral"]): 0.70,
    frozenset(["Aquatic", "Electric"]): 0.60,
    frozenset(["Brawler", "Beast"]): 1.15,
    frozenset(["Dread", "Astral"]): 0.80,
    frozenset(["Toxic", "Sylvan"]): 1.10,
    frozenset(["Aquatic", "Ancient"]): 1.10,
    frozenset(["Astral", "Electric"]): 1.10,
    frozenset(["Inferno", "Aerial"]): 0.75,
    frozenset(["Mineral", "Sylvan"]): 0.75,
    frozenset(["Mythic", "Ancient"]): 0.60,
    frozenset(["Toxic", "Dread"]): 0.85,
    frozenset(["Beast", "Aquatic"]): 0.65,
    frozenset(["Frost", "Aquatic"]): 1.20,
    frozenset(["Brawler", "Astral"]): 0.80,
    frozenset(["Mineral", "Brawler"]): 1.10,
    frozenset(["Inferno", "Dread"]): 1.10,
    frozenset(["Aerial", "Beast"]): 1.10,
    frozenset(["Insect", "Mineral"]): 1.15,
    frozenset(["Sylvan", "Dread"]): 1.00,
    frozenset(["Insect", "Ancient"]): 1.15,
    frozenset(["Aerial", "Electric"]): 0.60,
}

INCOMPATIBLE_TYPE_PAIRS = {
    frozenset(["Beast", "Sylvan"]),
    frozenset(["Frost", "Electric"]),
    frozenset(["Astral", "Mythic"]),
    frozenset(["Inferno", "Aquatic"]),
    frozenset(["Inferno", "Frost"]),
    frozenset(["Electric", "Mineral"]),
    frozenset(["Toxic", "Mineral"]),
    frozenset(["Brawler", "Aquatic"]),
    frozenset(["Mythic", "Dread"]),
    frozenset(["Inferno", "Sylvan"]),
    frozenset(["Inferno", "Toxic"]),
    frozenset(["Insect", "Frost"]),
}

MAJOR_MODS = {
    "Starwarden": {
        "mul": {"SPDEF": 1.28, "LUCK": 1.20, "HP": 1.10},
        "add": {},
        "tags": ["Barrier:Cosmic", "Weak:Obsidian", "CelestialGuard"],
        "allowed_types": ["Mythic", "Astral", "Anomalous"],
        "rarity": 1.3,
        "synergy_bonus": {"Mythic": 1.4},
    },
    "BrightFlare": {
        "mul": {"SPATK": 1.22, "ATK": 1.12, "SPD": 1.05},
        "add": {},
        "tags": ["Burn:Overtime", "Weak:Aquatic", "Cinderwake"],
        "allowed_types": ["Inferno", "Electric"],
        "rarity": 0.9,
        "synergy_bonus": {"Inferno": 1.5},
    },
    "ExoSkeleton": {
        "mul": {"SPD": 1.18, "EVA": 1.15, "DEF": 1.08},
        "add": {},
        "tags": ["Shell:Echo", "Weak:Tempest", "Hollowbody"],
        "allowed_types": ["Insect", "Dread", "Ancient"],
        "rarity": 0.85,
        "synergy_bonus": {"Insect": 1.3},
    },
    "DeepEarth": {
        "mul": {"HP": 1.25, "DEF": 1.20, "SPD": 0.88},
        "add": {},
        "tags": ["Burrow:Deep", "Weak:Tempest", "StoneSleep"],
        "allowed_types": ["Mineral", "Ancient", "Dread"],
        "rarity": 0.9,
        "synergy_bonus": {"Ancient": 1.3},
    },
    "Riftwalker": {
        "mul": {"SPD": 1.22, "LUCK": 1.15, "SPATK": 1.10},
        "add": {"EVA": 5},
        "tags": ["Teleport:Long", "Weak:Metallic", "DimensionalSlip"],
        "allowed_types": ["Astral", "Dread", "Anomalous"],
        "rarity": 1.2,
        "synergy_bonus": {"Astral": 1.2},
    },
    "Obsidian": {
        "mul": {"DEF": 1.28, "SPDEF": 1.18, "SPD": 0.92},
        "add": {},
        "tags": ["Resist:Astral", "Weak:Tempest", "VolcanicGlass"],
        "allowed_types": ["Mineral", "Inferno", "Ancient"],
        "rarity": 1.0,
        "synergy_bonus": {"Inferno": 1.2},
    },
    "Bloodforge": {
        "mul": {"ATK": 1.28, "HP": 1.12, "DEF": 1.08},
        "add": {},
        "tags": ["Regen:OnHit", "Weak:Radiant", "Hemofury"],
        "allowed_types": ["Mineral", "Dread", "Brawler", "Inferno"],
        "rarity": 1.4,
        "synergy_bonus": {"Mineral": 1.2, "Inferno": 1.2},
    },
    "Crystalline": {
        "mul": {"SPDEF": 1.15},
        "add": {"HP": 10},
        "tags": ["Resist:Mind", "Shatter:OnCrit"],
        "allowed_types": ["Mineral", "Frost", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Cavernborn": {
        "mul": {"SPDEF": 1.1, "HP": 1.2},
        "add": {"ACC": 5},
        "tags": ["Accuracy:Dark", "Echolocation"],
        "allowed_types": ["Mineral", "Beast", "Dread", "Insect"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Arctic": {
        "mul": {"SPDEF": 1.1, "SPD": 1.08},
        "add": {},
        "tags": ["Slide:Frost", "Resist:Frost"],
        "allowed_types": ["Frost", "Aquatic"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "BattleScarred": {
        "mul": {"HP": 1.1, "ATK": 1.05, "DEF": 1.05},
        "add": {},
        "tags": ["Grit", "Endure"],
        "allowed_types": SEED_TYPES,
        "rarity": 1.0,
        "synergy_bonus": {"Brawler": 1.2},
    },
    "FullBloom": {
        "mul": {"SPATK": 1.1, "SPD": 0.92},
        "add": {"DEF": 5},
        "tags": ["Leech:Minor", "Grasp"],
        "allowed_types": ["Sylvan", "Toxic"],
        "rarity": 1.0,
        "synergy_bonus": {"Sylvan": 1.2},
    },
    "RuneReader": {
        "mul": {"SPATK": 1.15, "LUCK": 1.05},
        "add": {},
        "tags": ["RuneSlots:+1", "Empower:Glyph"],
        "allowed_types": ["Mythic", "Ancient", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Cultivated": {
        "mul": {"HP": 1.15, "SPDEF": 1.05},
        "add": {"HP": 15},
        "tags": ["Heal:Terrain", "Barkskin"],
        "allowed_types": ["Sylvan", "Toxic"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "SuperOrbital": {
        "mul": {"SPATK": 1.18},
        "add": {},
        "tags": ["Curse:Minor", "GravityWell"],
        "allowed_types": ["Ancient", "Anomalous", "Astral", "Mythic", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "SandCrawler": {
        "mul": {"SPD": 1.12, "DEF": 1.05},
        "add": {},
        "tags": ["Initiative:Sand", "Burrow"],
        "allowed_types": ["Mineral", "Beast", "Insect"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Brimstone": {
        "mul": {"SPATK": 1.15},
        "add": {"LUCK": 5},
        "tags": ["Ignite:Low", "Kindle"],
        "allowed_types": ["Inferno", "Mineral", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "LoreGuardian": {
        "mul": {"SPDEF": 1.15, "LUCK": 1.05},
        "add": {},
        "tags": ["Action:Flow", "AncientKnowledge"],
        "allowed_types": ["Mythic", "Ancient", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Necromance": {
        "mul": {"SPATK": 1.15, "HP": 0.95},
        "add": {},
        "tags": ["Summon:Undead", "SoulPact"],
        "allowed_types": ["Dread", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Paranormal": {
        "mul": {"SPDEF": 1.15, "LUCK": 1.08},
        "add": {},
        "tags": ["Phase", "Incorporeal"],
        "allowed_types": ["Dread", "Astral", "Mythic", "Anomalous"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Feralkin": {
        "mul": {"SPD": 1.1, "ATK": 1.1},
        "add": {},
        "tags": ["Howl:Pack", "Tracker"],
        "allowed_types": ["Beast", "Aerial"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Shadowshroud": {
        "mul": {"SPD": 1.08, "EVA": 1.12},
        "add": {},
        "tags": ["Veil:Dark", "Stealth"],
        "allowed_types": ["Dread", "Beast"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "DarkIce": {
        "mul": {"SPDEF": 1.12, "SPATK": 1.05},
        "add": {},
        "tags": ["Slide:Frost", "Frostbite"],
        "allowed_types": ["Frost", "Dread", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Extrasensory": {
        "mul": {"SPATK": 1.15, "ACC": 1.08},
        "add": {},
        "tags": ["Precognition", "Mind-Reader"],
        "allowed_types": ["Astral", "Mythic"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "ThunderClap": {
        "mul": {"SPATK": 1.15, "ATK": 1.1},
        "add": {},
        "tags": ["Call:Storm", "SonicBoom"],
        "allowed_types": ["Electric", "Aerial", "Brawler"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "ArcheoAnomaly": {
        "mul": {"ATK": 1.1, "SPDEF": 1.1},
        "add": {"EVA": 3, "LUCK": 3},
        "tags": ["Sentience:Inconsistent", "TemporalFlux"],
        "allowed_types": ["Ancient", "Astral", "Anomalous"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Tectonic": {
        "mul": {"DEF": 1.25, "HP": 1.15, "ATK": 1.10},
        "add": {"DEF": 10},
        "tags": ["Resist:Stormforged", "Terrain:Bonus", "Terraform"],
        "allowed_types": ["Mineral", "Ancient"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Glacial": {
        "mul": {"SPDEF": 1.25, "HP": 1.20, "SPD": 0.90},
        "add": {"SPDEF": 10},
        "tags": ["Resist:Frostbound", "Weak:Tempest", "IceArmor"],
        "allowed_types": ["Frost", "Aquatic", "Ancient"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Voltaic": {
        "mul": {"SPD": 1.25, "SPATK": 1.20},
        "add": {"ACC": 5},
        "tags": ["Resist:Electric", "Weak:Terra", "StaticField"],
        "allowed_types": ["Electric", "Brawler", "Aerial"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Noxious": {
        "mul": {"DEF": 1.20, "SPDEF": 1.15, "LUCK": 1.10},
        "add": {},
        "tags": ["DOT:Poison", "Weak:Radiant", "Neurotoxin"],
        "allowed_types": ["Toxic", "Insect", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Radiant": {
        "mul": {"SPATK": 1.10, "SPDEF": 1.15},
        "add": {"ACC": 10},
        "tags": ["Cure:Blind", "Weak:Shrouded", "HolyLight"],
        "allowed_types": ["Mythic", "Astral", "Anomalous"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "BioLuminous": {
        "mul": {"SPD": 1.20, "SPATK": 1.15, "EVA": 1.10},
        "add": {"EVA": 5},
        "tags": ["Glow", "Weak:Dread", "Photosynthesis"],
        "allowed_types": ["Sylvan", "Aquatic", "Insect"],
        "rarity": 1.0,
        "synergy_bonus": {"Aquatic": 1.2},
    },
    "Psychic": {
        "mul": {"SPATK": 1.25, "LUCK": 1.20, "SPDEF": 1.10},
        "add": {"LUCK": 5},
        "tags": ["Pierce:Barrier", "Weak:Obsidian", "Resist:Anomalous"],
        "allowed_types": ["Mythic", "Astral", "Anomalous", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Solar": {
        "mul": {"ATK": 1.20, "SPATK": 1.20, "HP": 1.10},
        "add": {},
        "tags": ["Regen:Day", "Weak:Chaos", "Sunfire"],
        "allowed_types": ["Inferno", "Aerial", "Mythic", "Sylvan"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Nocturnal": {
        "mul": {"SPDEF": 1.25, "EVA": 1.15, "HP": 1.10},
        "add": {},
        "tags": ["Regen:Night", "Weak:Solar", "Moonshield"],
        "allowed_types": ["Dread", "Beast", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Chaotic": {
        "mul": {"ATK": 1.25, "SPATK": 1.25, "LUCK": 1.25, "HP": 0.90, "ACC": 0.95},
        "add": {},
        "tags": ["Random:Proc", "Weak:Ironclad", "Unstable"],
        "allowed_types": ["Dread", "Astral", "Anomalous"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Monolithic": {
        "mul": {"DEF": 1.20, "ATK": 1.15, "HP": 1.10},
        "add": {},
        "tags": ["Ambush:Burrow", "Weak:Astral", "Tremorsense"],
        "allowed_types": ["Mineral", "Ancient", "Beast"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Tempest": {
        "mul": {"SPD": 1.25, "ATK": 1.15},
        "add": {"ACC": 5},
        "tags": ["MultiHit:Storm", "Weak:Crystalline", "GaleForce"],
        "allowed_types": ["Aerial", "Electric", "Aquatic"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Shielded": {
        "mul": {"DEF": 1.30, "SPDEF": 1.20, "SPD": 0.85},
        "add": {"DEF": 15},
        "tags": ["Guard:Stagger", "Weak:Shrouded", "Ironclad"],
        "allowed_types": ["Brawler", "Mineral", "Ancient", "Beast"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Vulcan": {
        "mul": {"SPATK": 1.25, "DEF": 1.15},
        "add": {"SPATK": 5},
        "tags": ["Burn:Contact", "Weak:Tempest", "MagmaPlating"],
        "allowed_types": ["Inferno", "Mineral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Atmos": {
        "mul": {"SPD": 1.20, "EVA": 1.20},
        "add": {"EVA": 10},
        "tags": ["Evade:Aerial", "Weak:Electric", "Updraft"],
        "allowed_types": ["Aerial", "Insect", "Mythic"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Abyssal": {
        "mul": {"HP": 1.25, "SPDEF": 1.20, "SPD": 0.90},
        "add": {},
        "tags": ["FirstStrike:Water", "Weak:Solar", "Pressure"],
        "allowed_types": ["Aquatic", "Dread", "Ancient"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Telekinesis": {
        "mul": {"SPATK": 1.20, "LUCK": 1.15},
        "add": {"ACC": 5},
        "tags": ["Pierce:Mind", "Weak:Ironclad", "MindRead"],
        "allowed_types": ["Astral", "Mythic", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Vedic": {
        "mul": {"SPD": 1.15, "SPDEF": 1.15, "EVA": 1.10},
        "add": {"EVA": 5},
        "tags": ["Fog:Field", "Weak:Radiant", "Ethereal"],
        "allowed_types": ["Dread", "Astral", "Anomalous"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Farphase": {
        "mul": {"SPD": 1.20, "LUCK": 1.15},
        "add": {"ACC": 5},
        "tags": ["Blink:Short", "Weak:Obsidian", "PhaseShift"],
        "allowed_types": ["Astral", "Electric", "Dread"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Metallic": {
        "mul": {"DEF": 1.35, "ATK": 1.15},
        "add": {"DEF": 15},
        "tags": ["Resist:Toxic", "Weak:Electric", "MetalCoat"],
        "allowed_types": ["Mineral", "Insect"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Sensei": {
        "mul": {"ATK": 1.10, "SPATK": 1.10, "ACC": 1.10},
        "add": {"ACC": 10},
        "tags": ["Mentor", "FlawlessTechnique"],
        "allowed_types": ["Brawler", "Mythic", "Astral"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Fossilized": {
        "mul": {"HP": 1.05, "ATK": 1.22, "DEF": 1.20, "SPDEF": 1.12},
        "add": {},
        "tags": ["Ability:Revive", "Resist:Mineral"],
        "allowed_types": ["Ancient", "Mineral", "Beast"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "BoltThrower": {
        "mul": {"ATK": 1.15, "ACC": 1.05},
        "add": {},
        "tags": ["Call:Storm", "Jolt"],
        "allowed_types": ["Electric", "Brawler", "Aerial"],
        "rarity": 1.0,
        "synergy_bonus": {},
    },
    "Stormforged": {
        "mul": {"SPD": 1.20, "SPATK": 1.25, "ACC": 1.05},
        "add": {},
        "tags": ["Resist:Tempest", "Weak:Mineral", "Stormbringer"],
        "allowed_types": ["Electric", "Aerial", "Mythic"],
        "rarity": 1.1,
        "synergy_bonus": {"Electric": 1.2, "Aerial": 1.1},
    },
    "Sylvan": {
        "mul": {"HP": 1.20, "SPDEF": 1.20, "SPD": 0.9},
        "add": {"HP": 20},
        "tags": ["Regen:Terrain", "Weak:Inferno", "Photosynthesis"],
        "allowed_types": ["Sylvan", "Toxic", "Aquatic"],
        "rarity": 0.9,
        "synergy_bonus": {"Sylvan": 1.1},
    },
    "Shrouded": {
        "mul": {"EVA": 1.25, "SPD": 1.15, "ATK": 1.10},
        "add": {"EVA": 10},
        "tags": ["Stealth:Shadow", "Weak:Radiant", "Shadowstep"],
        "allowed_types": ["Dread", "Astral", "Insect"],
        "rarity": 1.2,
        "synergy_bonus": {"Dread": 1.4},
    },
    "Fey-touched": {
        "mul": {"LUCK": 1.30, "SPATK": 1.15, "SPD": 1.10},
        "add": {"LUCK": 15},
        "tags": ["Fey-curse", "Weak:Metallic", "Mischief"],
        "allowed_types": ["Mythic", "Sylvan", "Insect", "Astral"],
        "rarity": 1.3,
        "synergy_bonus": {"Mythic": 1.4},
    },
}

UTILITY_MODS = {
    "CosmicInterpreter": {
        "identify_rates": 0.30,
        "quest_bonus": 0.1,
        "tags": ["Identify:Rare", "StarChart"],
        "rarity": 1,
        "allowed_types": ["Mythic", "Astral", "Anomalous"],
    },
    "Symbiote": {
        "field_heal_ticks": 0.08,
        "ally_heal_ticks": 0.04,
        "tags": ["HealingAura", "Lifebond"],
        "rarity": 1,
        "allowed_types": ["Sylvan", "Insect", "Aquatic"],
    },
    "Ageless": {
        "exp_mult": 1.15,
        "loot_mult": 1.20,
        "tags": ["Lore:Gates", "AncientWisdom"],
    },
    "BornLeader": {
        "ally_buff": {"ATK": 1.15, "DEF": 1.1},
        "exp_share_bonus": 0.25,
        "tags": ["VeteranPresence", "BattleCry", "Rally"],
    },
    "Diviner": {
        "minimap_reveal": True,
        "loot_mult": 1.1,
        "tags": ["Reveal:Secrets", "Dowsing"],
    },
    "InnateGuard": {
        "ally_buff": {"DEF": 1.15, "SPDEF": 1.15},
        "aggro_redirect": True,
        "tags": ["Bodyguard", "ShieldAlly"],
    },
    "Empath": {
        "ally_heal_on_crit": 0.15,
        "npc_dialog_plus": True,
        "tags": ["Soothing", "HealPulse"],
    },
    "KeeperOfKeys": {
        "unlock_tags": ["Gate:Runic", "Door:Sealed", "Chest:Ancient"],
        "tags": ["Locksmith", "MasterKey"],
    },
    "Historian": {
        "npc_dialog_plus": True,
        "exp_mult": 1.05,
        "tags": ["Diplomacy", "Scribe", "Lorekeeper"],
    },
    "Impossible": {
        "rng_luck_bias": 0.15,
        "double_rolls": ["Crit"],
        "tags": ["WildProcs", "ProbabilityBender"],
        "allowed_types": ["Mythic", "Astral", "Anomalous"],
    },
    "LongSeeker": {
        "track_rare_spawns": True,
        "track_rare_loot": True,
        "minimap_reveal": True,
        "tags": ["Tracker", "TreasureHunter"],
    },
    "Transient": {
        "camp_bonus": {"Heal%": 0.10, "exp_mult": 1.20},
        "shop_discount": 0.05,
        "tags": ["Wanderer", "Survivalist"],
    },
    "Cartographer": {
        "fast_travel_nodes": True,
        "map_reveal_radius": 1.5,
        "tags": ["Pathfinder", "WorldMap"],
    },
    "SuperPositioned": {
        "double_rolls": ["Loot", "Crit", "Evasion"],
        "rng_luck_bias": 0.1,
        "tags": ["Quantum", "Uncertainty"],
        "allowed_types": ["Astral", "Electric", "Anomalous"],
    },
    "CombatController": {
        "enemy_opening_debuff": {"SPD": 0.85, "ACC": -10},
        "ally_buff": {"SPD": 1.1},
        "tags": ["Disorient", "Tactician"],
    },
    "Scholar": {
        "ally_exp_mult": 1.20,
        "identify_rates": 0.15,
        "tags": ["Study", "AnalyzeWeakness"],
    },
    "Humanitarian": {
        "loot_to_supplies": 0.25,
        "ally_heal_on_kill": 0.05,
        "tags": ["ConvertLoot", "FieldMedic"],
    },
    "Grinder": {
        "spar_exp_bonus": 0.25,
        "stat_gain_bonus": 0.05,
        "tags": ["Determined", "NoPainNoGain"],
    },
    "NaturalDetector": {
        "pull_items_radius": 15,
        "pull_hidden_radius": 10,
        "tags": ["Magnetism", "ItemScavenger"],
        "allowed_types": ["Electric", "Mineral", "Brawler"],
    },
    "Confidant": {
        "npc_dialog_plus": True,
        "minimap_reveal": True,
        "unlock_tags": ["Path:Hidden"],
        "tags": ["Whispers", "VeiledKnowledge"],
    },
    "AntiExtinct": {
        "self_revive": True,
        "identify_fossils": True,
        "identify_eggs": True,
        "tags": ["LastOfKind", "Endangered"],
        "allowed_types": ["Ancient", "Mythic"],
    },
    "Alchemist": {
        "loot_to_supplies": 0.15,
        "crafting_bonus": 0.1,
        "tags": ["Transmute", "PotionMaster"],
        "allowed_types": ["Toxic", "Sylvan", "Astral"],
    },
    "Geomancer": {
        "field_buff": {"DEF": 1.1},
        "unlock_tags": ["Terrain:Blocked"],
        "tags": ["Earthshaper", "LeylineReader"],
        "allowed_types": ["Mineral", "Sylvan", "Ancient"],
    },
    "Chronomancer": {
        "rng_luck_bias": 0.1,
        "enemy_opening_debuff": {"SPD": 0.95},
        "tags": ["TimeWarp", "Haste", "Slow"],
        "allowed_types": ["Astral", "Mythic", "Anomalous"],
    },
    "Forager": {
        "loot_mult_consumable": 1.5,
        "tags": ["Finds:Herbs", "Finds:Mushrooms", "Resourceful"],
        "allowed_types": ["Sylvan", "Beast", "Insect"],
    },
    "Haggler": {
        "shop_discount": 0.30,
        "shop_sell_bonus": 0.15,
        "tags": ["Barter", "MerchantFriend"],
    },
    "Pathwarden": {
        "terrain_neg_resist": 0.5,
        "tags": ["Sure-footed", "All-Terrain"],
        "allowed_types": ["Mineral", "Beast", "Aerial", "Ancient"],
    },
    "MasterCrafter": {
        "crafting_bonus": 0.25,
        "crafting_speed_mult": 1.5,
        "tags": ["Artisan", "Tinkerer", "Masterwork"],
        "allowed_types": ["Brawler", "Astral", "Mineral", "Ancient"],
    },
}

ALL_MODS = [MAJOR_MODS, UTILITY_MODS]

def _load_weighted_yaml(filename: str) -> Dict[str, float]:
    """Loads a YAML file of {'name': str, 'weight': float} into a dict for weighted_choice."""
    filepath = Path(__file__).parent / filename
    if not filepath.exists():
        raise FileNotFoundError(f"Data file not found: {filepath}")
    with open(filepath, "r", encoding="utf-8") as f:
        data = yaml.safe_load(f)
    return {item['name']: item.get('weight', 1.0) for item in data if 'name' in item}

PHYSICAL_TRAITS = _load_weighted_yaml("physical_traits.yaml")
HELD_ITEMS = _load_weighted_yaml("held_items.yaml")
KIN_WOUNDS = _load_weighted_yaml("kin_wounds.yaml")

TEMPERS_COUPLED: Dict[str, Dict[str, float]] = {
    "mood": {
        "Shy": 1.0,
        "Bashful": 1.0,
        "Hostile": 0.8,
        "Wary": 0.9,
        "Clever": 0.8,
        "Aloof": 0.9,
        "Warm": 1.0,
        "Cold": 0.9,
        "Guarded": 0.9,
        "Friendly": 1.0,
        "Suspicious": 0.8,
        "Curious": 1.0,
        "Gentle": 1.0,
        "Arrogant": 0.8,
        "Proud": 0.8,
        "Humble": 1.0,
        "Kind": 1.0,
        "Cruel": 0.9,
        "Generous": 1.0,
        "Jealous": 0.8,
        "Envious": 0.8,
        "Patient": 1.0,
        "Impatient": 0.9,
        "Sensitive": 1.0,
        "Indifferent": 0.9,
        "Compassionate": 1.0,
        "Cynical": 0.8,
        "Trusting": 1.0,
        "Distrustful": 0.8,
        "Amiable": 1.0,
        "Resentful": 0.8,
        "Cheerful": 1.0,
        "Irritable": 0.9,
        "Sincere": 1.0,
        "Devious": 0.9,
        "Gracious": 1.0,
        "Petty": 0.8,
        "Tolerant": 1.0,
        "Moody": 0.9,
        "Outgoing": 1.0,
        "Territorial": 0.8,
        "Aggressive": 0.8,
        "Conceited": 0.8,
        "Confident": 0.9,
        "Wise": 0.8,
        "Optimistic": 1.0,
        "Lonely": 0.9,
    },
    "affinity": {
        "Selflessness": 1.0,
        "Warmth": 1.0,
        "Hostility": 0.8,
        "Coyness": 1.0,
        "Honor": 0.8,
        "Glory": 0.8,
        "Boldness": 0.9,
        "Intellect": 0.8,
        "Caution": 0.9,
        "Suspicion": 0.8,
        "Curiosity": 1.0,
        "Gentleness": 1.0,
        "Arrogance": 0.8,
        "Pride": 0.8,
        "Humility": 1.0,
        "Kindness": 1.0,
        "Cruelty": 0.6,
        "Generosity": 1.0,
        "Open-Mindedness": 1.0,
        "Envy": 0.8,
        "Patience": 1.0,
        "Impatience": 0.9,
        "Sensitivity": 1.0,
        "Indifference": 0.9,
        "Compassion": 1.0,
        "Cynicism": 0.8,
        "Trustfulness": 1.0,
        "Distrust": 0.8,
        "Amiability": 1.0,
        "Resentment": 0.8,
        "Cheerfulness": 1.0,
        "Irritability": 0.9,
        "Sincerity": 1.0,
        "Deviousness": 0.8,
        "Graciousness": 1.0,
        "Pettiness": 0.8,
        "Tolerance": 1.0,
    },
}

_ALL_HABITATS_RAW = [
    ("Oldgrowth Marsh", 1.0),
    ("Misty Glades", 1.0),
    ("Thornveil Thicket", 0.9),
    ("Highlands", 1.0),
    ("Smoldering Flats", 0.9),
    ("Collapsed Magma Tubes", 0.8),
    ("Ancient Lavaflows", 0.8),
    ("Whispering Dunes", 0.9),
    ("Glass Caverns", 0.8),
    ("Obsidian Labyrinth", 0.8),
    ("Strikken Ashlands", 0.8),
    ("Mt. Thermallia", 0.8),
    ("Crystalline Cave", 0.8),
    ("Petrified Forest", 0.8),
    ("Glassy Caverns", 0.8),
    ("Skybridge Peaks", 0.8),
    ("Frozen Steppe", 0.9),
    ("Glass Desert", 0.8),
    ("Shattered Plateau", 0.8),
    ("Yittrosian Forest", 0.8),
    ("Thriving Reefs", 1.0),
    ("Sunless Abyss", 0.9),
    ("Alpine Lakes", 0.9),
    ("Moonlit Atolls", 0.8),
    ("Bioluminous Currents", 0.8),
    ("Violent Rapids", 0.9),
    ("Freshwater Springs", 1.0),
    ("Unyielding Cascades", 0.8),
    ("Ennoan Grasslands", 1.0),
    ("Alpine Slopes", 0.9),
    ("Lunaglow Plateau", 0.8),
    ("Riverlands", 1.0),
    ("Dayless Mosswood", 0.8),
    ("Still Tidepools", 1.0),
    ("Starfall Crater", 0.8),
    ("Celestial Spire", 0.8),
    ("Aurora Fields", 0.9),
    ("Echoing Grotto", 0.8),
    ("Astral Terrace", 0.8),
    ("Dread Catacombs", 0.9),
    ("Gloomfen Bogs", 0.9),
    ("AshGlass Tombs", 0.8),
    ("Darkmist Chasm", 0.8),
    ("Abandoned Wastes", 0.8),
    ("Power Plant", 0.9),
    ("Eroding Shipwreck", 1.0),
    ("Ghost Town", 0.8),
    ("Abandoned Village", 1.0),
    ("Concrete Jungle", 1.0),
    ("Rusted Plane Wreckage", 0.9),
    ("Wild Tundra", 1.0),
    ("Frost Caps", 0.9),
    ("Snowcapped Peaks", 1.0),
    ("Frigid Icefields", 0.8),
    ("Snowpacked Mountains", 0.9),
    ("Permafrost Highlands", 0.8),
    ("Clockwork City", 0.8),
    ("Bioforge Basin", 0.8),
    ("Crumbling Ruins", 1.0),
    ("Forgotten Temple", 0.8),
    ("Ancient Battlefield", 0.8),
    ("Archaeological Dig", 0.9),
    ("Agency Black Site", 0.8),
    ("Synthetic Biosphere", 0.8),
    ("Verdant Plains", 1.0),
    ("Blooming Valley", 1.0),
    ("Ironwood Deep", 0.8),
    ("Fungal Vales", 0.9),
    ("Bewitched Glen", 0.8),
    ("Netherbleak Hollow", 0.8),
    ("Wyrmscar Ridge", 0.8),
    ("Restricted Labratory", 0.8),
    ("Secret Lab", 0.8),
    ("Origin<UNKNOWN>", 0.8),
    ("Retired Military Base", 0.9),
    ("Condemned HydroPowerDam", 0.9),
    ("Monolithic Structures", 0.8),
    ("Classified Research Facilities", 0.8),
]

ALL_HABITATS = sorted(list(set([item[0] for item in _ALL_HABITATS_RAW])))

HABITATS_BY_TYPE: Dict[str, Dict[str, float]] = {
    "Sylvan": {
        "Oldgrowth Marsh": 1.0,
        "Misty Glades": 1.0,
        "Bewitched Glen": 0.8,
        "Verdant Plains": 1.0,
        "Blooming Valley": 1.0,
        "Ironwood Deep": 0.8,
        "Fungal Vales": 0.9,
        "Thornveil Thicket": 0.9,
        "Dayless Mosswood": 0.8,
        "Shattered Plateau": 0.8,
        "Wyrmscar Ridge": 0.8,
    },
    "Inferno": {
        "Smoldering Flats": 0.9,
        "Collapsed Magma Tubes": 0.8,
        "Ancient Lavaflows": 0.8,
        "Whispering Dunes": 0.9,
        "Glass Caverns": 0.8,
        "Obsidian Labyrinth": 0.8,
        "Petrified Forest": 0.8,
        "Strikken Ashlands": 0.8,
        "Mt. Thermallia": 0.8,
    },
    "Mineral": {
        "Crystalline Cave": 0.8,
        "Petrified Forest": 0.8,
        "Ancient Lavaflows": 0.8,
        "Whispering Dunes": 0.9,
        "Glass Caverns": 0.8,
        "Thriving Reefs": 1.0,
        "Crumbling Ruins": 1.0,
        "Forgotten Temple": 0.8,
        "Archaeological Dig": 0.9,
    },
    "Aerial": {
        "Skybridge Peaks": 0.8,
        "Frozen Steppe": 0.9,
        "Whispering Dunes": 0.9,
        "Glass Desert": 0.8,
        "Verdant Plains": 1.0,
        "Highlands": 1.0,
        "Shattered Plateau": 0.8,
        "Wyrmscar Ridge": 0.8,
        "Yittrosian Forest": 0.8,
    },
    "Aquatic": {
        "Still Tidepools": 1.0,
        "Thriving Reefs": 1.0,
        "Sunless Abyss": 0.9,
        "Alpine Lakes": 0.9,
        "Moonlit Atolls": 0.8,
        "Bioluminous Currents": 0.8,
        "Violent Rapids": 0.9,
        "Freshwater Springs": 1.0,
        "Unyielding Cascades": 0.8,
    },
    "Beast": {
        "Crystalline Cave": 0.8,
        "Ennoan Grasslands": 1.0,
        "Alpine Slopes": 0.9,
        "Lunaglow Plateau": 0.8,
        "Riverlands": 1.0,
        "Dayless Mosswood": 0.8,
        "Still Tidepools": 1.0,
        "Glass Desert": 0.8,
        "Blooming Valley": 1.0,
        "Ironwood Deep": 0.8,
        "Fungal Vales": 0.9,
        "Thornveil Thicket": 0.9,
    },
    "Mythic": {
        "Starfall Crater": 0.8,
        "Celestial Spire": 0.8,
        "Aurora Fields": 0.8,
        "Echoing Grotto": 0.8,
        "Astral Terrace": 0.8,
        "Synthetic Biosphere": 0.8,
        "Origin<UNKNOWN>": 0.8,
    },
    "Insect": {
        "Echoing Grotto": 0.8,
        "Darkmist Chasm": 0.8,
        "Netherbleak Hollow": 0.8,
        "Whispering Dunes": 0.9,
        "Alpine Lakes": 0.9,
        "Petrified Forest": 0.8,
        "Oldgrowth Marsh": 1.0,
        "Misty Glades": 1.0,
        "Dayless Mosswood": 0.8,
        "Still Tidepools": 1.0,
        "Bioluminous Currents": 0.8,
    },
    "Dread": {
        "Dread Catacombs": 0.8,
        "Gloomfen Bogs": 0.9,
        "AshGlass Tombs": 0.8,
        "Darkmist Chasm": 0.8,
        "Netherbleak Hollow": 0.8,
        "Abandoned Wastes": 0.8,
        "Retired Military Base": 0.9,
        "Monolithic Structures": 0.8,
        "Dayless Mosswood": 0.8,
    },
    "Electric": {
        "Power Plant": 0.9,
        "Eroding Shipwreck": 1.0,
        "Ghost Town": 0.8,
        "Abandoned Village": 1.0,
        "Restricted Labratory": 0.8,
        "Concrete Jungle": 1.0,
        "Retired Military Base": 0.9,
        "Condemned HydroPowerDam": 0.9,
        "Rusted Plane Wreckage": 0.9,
    },
    "Frost": {
        "Wild Tundra": 1.0,
        "Frost Caps": 0.9,
        "Snowcapped Peaks": 1.0,
        "Frigid Icefields": 0.8,
        "Snowpacked Mountains": 0.9,
        "Permafrost Highlands": 0.8,
    },
    "Brawler": {
        "Clockwork City": 0.8,
        "Bioforge Basin": 0.8,
        "Crumbling Ruins": 1.0,
        "Forgotten Temple": 0.8,
        "Ancient Battlefield": 0.8,
        "Archaeological Dig": 0.9,
        "Secret Lab": 0.8,
        "Agency Black Site": 0.8,
        "Synthetic Biosphere": 0.8,
        "Origin<UNKNOWN>": 0.8,
    },
    "Toxic": {
        "Still Tidepools": 1.0,
        "Thriving Reefs": 1.0,
        "Secret Lab": 0.8,
        "Restricted Labratory": 0.8,
        "Bewitched Glen": 0.8,
        "Verdant Plains": 1.0,
        "Blooming Valley": 1.0,
        "Ironwood Deep": 0.8,
        "Fungal Vales": 0.9,
        "Darkmist Chasm": 0.8,
        "Netherbleak Hollow": 0.8,
    },
    "Ancient": {
        "Bewitched Glen": 0.8,
        "Darkmist Chasm": 0.8,
        "Netherbleak Hollow": 0.8,
        "Crumbling Ruins": 1.0,
        "Forgotten Temple": 0.8,
        "Synthetic Biosphere": 0.8,
        "Abandoned Wastes": 0.8,
        "Retired Military Base": 0.9,
        "Monolithic Structures": 0.8,
        "Dayless Mosswood": 0.8,
        "Wyrmscar Ridge": 0.8,
    },
    "Astral": {
        "Abandoned Village": 1.0,
        "Restricted Labratory": 0.8,
        "Secret Lab": 0.8,
        "Crumbling Ruins": 1.0,
        "Forgotten Temple": 0.8,
        "Origin<UNKNOWN>": 0.8,
        "Retired Military Base": 0.9,
        "Condemned HydroPowerDam": 0.9,
        "Ironwood Deep": 0.8,
        "Monolithic Structures": 0.8,
        "Dayless Mosswood": 0.8,
        "Ghost Town": 0.8,
        "Classified Research Facilities": 0.8,
    },
    "Anomalous": dict(_ALL_HABITATS_RAW),
}
